<?php

/**
 * @file
 * Drupal integration with Font Awesome, the iconic font for use with Bootstrap.
 */

/**
 * Implements hook_help().
 */
function fontawesome_help($path, $arg) {
  switch ($path) {
  case 'admin/help#fontawesome':
    return '<p><i class="icon-flag icon-large"></i>' . t('<a href="@fontawesome">Font Awesome</a> is an iconic font designed for use with <a href="@bootstrap">Twitter Bootstrap</a>.', array(
      '@fontawesome' => 'http://fortawesome.github.com/Font-Awesome/',
      '@bootstrap' => 'http://twitter.github.com/bootstrap',
    )) . '</p>';
  }
}

/**
 * Implements hook_init().
 */
function fontawesome_init() {
  // Load up the Font Awesome CSS file.
  drupal_load('module', 'libraries');
  libraries_load('fontawesome');
}

/**
 * Implements hook_libraries_info().
 */
function fontawesome_libraries_info() {
  $libraries['fontawesome'] = array(
    'name' => 'Font Awesome',
    'vendor url' => 'http://fortawesome.github.com/Font-Awesome/',
    'download url' => 'https://github.com/FortAwesome/Font-Awesome/zipball/master',
    'version arguments' => array(
      'file' => 'css/font-awesome.css',
      'pattern' => '/((?:\d+\.?){2,3})/',
      'lines' => 10,
      'cols' => 14,
    ),
    'files' => array(
      'css' => array(
        'css/font-awesome.css',
      ),
    ),
  );

  return $libraries;
}


/**
 * Implements hook_icon_providers().
 */
function fontawesome_icon_providers() {
  $providers['fontawesome'] = array(
    'title' => t('fontawesome'),
    'url' => 'http://fontawesome.io',
    'default bundle' => array(
      'render' => 'html_tag',
      'settings' => fontawesome_default_settings(),
    ),
  );
  return $providers;
}


/**
 * Provide default bundle settings.
 */
function fontawesome_default_settings() {
  return array(
    'tag' => 'i',
  );
}

/**
 * Implements hook_icon_bundle_configure().
 */
function fontawesome_icon_bundle_configure(&$settings, &$form_state, &$complete_form) {
  $bundle = $form_state['bundle'];
  if ($bundle['provider'] === 'fontawesome') {
    $settings['tag'] = array(
      '#type' => 'select',
      '#title' => t('HTML Markup'),
      '#description' => t('Choose the HTML markup tag that Font Awesome icons should be created with.
        Typically, this is an %i tag, however it can be changed to suite the theme requirements.', array('%i' => '<i/>')),
      '#options' => drupal_map_assoc(array('i', 'span', 'div')),
      '#default_value' => isset($bundle['settings']['tag']) ? $bundle['settings']['tag'] : 'span',
    );
  }
}

/**
 * Define render hook information.
 *
 * @see hook_icon_render_hooks()
 */
function fontawesome_icon_render_hooks() {
  $hooks['html_tag'] = array();
  return $hooks;
}

/**
 * Implements hook_preprocess_icon().
 */
function fontawesome_preprocess_icon(&$variables) {
  if (!empty($variables['bundle']['provider']) && $variables['bundle']['provider'] === 'fontawesome') {
    $variables['attributes']['class'][] = 'fa';
  }
}


/**
 * @desc Implements hook_preprocess_icon_RENDER_HOOK().
 */
function fontawesome_preprocess_icon_html_tag(&$variables) {
  $bundle = &$variables['bundle'];
  $icon = &$variables['icon'];
  // Sanitize and add icon class here.
  $class = drupal_html_class($icon);

  $library = libraries_load('fontawesome');
  $lib_class = 'icon';
  if(isset($library['version']) && floor($library['version'])>3){
    $lib_class = 'fa';
  }
  $variables['attributes']['class'][] = $lib_class . ' ' . $lib_class . '-' . $class;
}

/**
 * @desc return HTML tag emement with fontawesome icon classed
 * @param <type> $variables
 * @return <type>
 */
function theme_icon_html_tag($variables) {
  $output = '';
  $bundle = $variables['bundle'];
  $icon = $variables['icon'];
  $output = theme('html_tag', array(
    'element' => array(
      '#tag' => isset($bundle['settings']['tag']) ? $bundle['settings']['tag'] : 'span',
      '#attributes' => $variables['attributes'],
      '#value' =>' ',
    ),
  ));
  return $output;
}


/**@TODO: Grab these icons from css/Json file.
 * @desc Implements hook_icon_bundles().
 */
function fontawesome_icon_bundles() {
  $bundles['fontawesome'] = array(
    'render' => 'html_tag',
    'provider' => 'fontawesome',
    'title' => t('FontAwsome: Icons'),
    'icons' => array(
      'glass' => 'glass',
'music' => 'music',
'search' => 'search',
'envelope-o' => 'envelope-o',
'heart' => 'heart',
'star' => 'star',
'star-o' => 'star-o',
'user' => 'user',
'film' => 'film',
'th-large' => 'th-large',
'th' => 'th',
'th-list' => 'th-list',
'check' => 'check',
'remove' => 'times',
'close' => 'times',
'times' => 'times',
'search-plus' => 'search-plus',
'search-minus' => 'search-minus',
'power-off' => 'power-off',
'signal' => 'signal',
'gear' => 'cog',
'cog' => 'cog',
'trash-o' => 'trash-o',
'home' => 'home',
'file-o' => 'file-o',
'clock-o' => 'clock-o',
'road' => 'road',
'download' => 'download',
'arrow-circle-o-down' => 'arrow-circle-o-down',
'arrow-circle-o-up' => 'arrow-circle-o-up',
'inbox' => 'inbox',
'play-circle-o' => 'play-circle-o',
'rotate' => 'repeat',
'repeat' => 'repeat',
'refresh' => 'refresh',
'list-alt' => 'list-alt',
'lock' => 'lock',
'flag' => 'flag',
'headphones' => 'headphones',
'volume-off' => 'volume-off',
'volume-down' => 'volume-down',
'volume-up' => 'volume-up',
'qrcode' => 'qrcode',
'barcode' => 'barcode',
'tag' => 'tag',
'tags' => 'tags',
'book' => 'book',
'bookmark' => 'bookmark',
'print' => 'print',
'camera' => 'camera',
'font' => 'font',
'bold' => 'bold',
'italic' => 'italic',
'text-height' => 'text-height',
'text-width' => 'text-width',
'align-left' => 'align-left',
'align-center' => 'align-center',
'align-right' => 'align-right',
'align-justify' => 'align-justify',
'list' => 'list',
'dedent' => 'outdent',
'outdent' => 'outdent',
'indent' => 'indent',
'video-camera' => 'video-camera',
'photo' => 'picture-o',
'image' => 'picture-o',
'picture-o' => 'picture-o',
'pencil' => 'pencil',
'map-marker' => 'map-marker',
'adjust' => 'adjust',
'tint' => 'tint',
'edit' => 'pencil-square-o',
'pencil-square-o' => 'pencil-square-o',
'share-square-o' => 'share-square-o',
'check-square-o' => 'check-square-o',
'arrows' => 'arrows',
'step-backward' => 'step-backward',
'fast-backward' => 'fast-backward',
'backward' => 'backward',
'play' => 'play',
'pause' => 'pause',
'stop' => 'stop',
'forward' => 'forward',
'fast-forward' => 'fast-forward',
'step-forward' => 'step-forward',
'eject' => 'eject',
'chevron-left' => 'chevron-left',
'chevron-right' => 'chevron-right',
'plus-circle' => 'plus-circle',
'minus-circle' => 'minus-circle',
'times-circle' => 'times-circle',
'check-circle' => 'check-circle',
'question-circle' => 'question-circle',
'info-circle' => 'info-circle',
'crosshairs' => 'crosshairs',
'times-circle-o' => 'times-circle-o',
'check-circle-o' => 'check-circle-o',
'ban' => 'ban',
'arrow-left' => 'arrow-left',
'arrow-right' => 'arrow-right',
'arrow-up' => 'arrow-up',
'arrow-down' => 'arrow-down',
'mail-forward' => 'share',
'share' => 'share',
'expand' => 'expand',
'compress' => 'compress',
'plus' => 'plus',
'minus' => 'minus',
'asterisk' => 'asterisk',
'exclamation-circle' => 'exclamation-circle',
'gift' => 'gift',
'leaf' => 'leaf',
'fire' => 'fire',
'eye' => 'eye',
'eye-slash' => 'eye-slash',
'warning' => 'exclamation-triangle',
'exclamation-triangle' => 'exclamation-triangle',
'plane' => 'plane',
'calendar' => 'calendar',
'random' => 'random',
'comment' => 'comment',
'magnet' => 'magnet',
'chevron-up' => 'chevron-up',
'chevron-down' => 'chevron-down',
'retweet' => 'retweet',
'shopping-cart' => 'shopping-cart',
'folder' => 'folder',
'folder-open' => 'folder-open',
'arrows-v' => 'arrows-v',
'arrows-h' => 'arrows-h',
'bar-chart-o' => 'bar-chart',
'bar-chart' => 'bar-chart',
'twitter-square' => 'twitter-square',
'facebook-square' => 'facebook-square',
'camera-retro' => 'camera-retro',
'key' => 'key',
'gears' => 'cogs',
'cogs' => 'cogs',
'comments' => 'comments',
'thumbs-o-up' => 'thumbs-o-up',
'thumbs-o-down' => 'thumbs-o-down',
'star-half' => 'star-half',
'heart-o' => 'heart-o',
'sign-out' => 'sign-out',
'linkedin-square' => 'linkedin-square',
'thumb-tack' => 'thumb-tack',
'external-link' => 'external-link',
'sign-in' => 'sign-in',
'trophy' => 'trophy',
'github-square' => 'github-square',
'upload' => 'upload',
'lemon-o' => 'lemon-o',
'phone' => 'phone',
'square-o' => 'square-o',
'bookmark-o' => 'bookmark-o',
'phone-square' => 'phone-square',
'twitter' => 'twitter',
'facebook' => 'facebook',
'github' => 'github',
'unlock' => 'unlock',
'credit-card' => 'credit-card',
'rss' => 'rss',
'hdd-o' => 'hdd-o',
'bullhorn' => 'bullhorn',
'bell' => 'bell',
'certificate' => 'certificate',
'hand-o-right' => 'hand-o-right',
'hand-o-left' => 'hand-o-left',
'hand-o-up' => 'hand-o-up',
'hand-o-down' => 'hand-o-down',
'arrow-circle-left' => 'arrow-circle-left',
'arrow-circle-right' => 'arrow-circle-right',
'arrow-circle-up' => 'arrow-circle-up',
'arrow-circle-down' => 'arrow-circle-down',
'globe' => 'globe',
'wrench' => 'wrench',
'tasks' => 'tasks',
'filter' => 'filter',
'briefcase' => 'briefcase',
'arrows-alt' => 'arrows-alt',
'group' => 'users',
'users' => 'users',
'chain' => 'link',
'link' => 'link',
'cloud' => 'cloud',
'flask' => 'flask',
'cut' => 'scissors',
'scissors' => 'scissors',
'copy' => 'files-o',
'files-o' => 'files-o',
'paperclip' => 'paperclip',
'save' => 'floppy-o',
'floppy-o' => 'floppy-o',
'square' => 'square',
'navicon' => 'bars',
'reorder' => 'bars',
'bars' => 'bars',
'list-ul' => 'list-ul',
'list-ol' => 'list-ol',
'strikethrough' => 'strikethrough',
'underline' => 'underline',
'table' => 'table',
'magic' => 'magic',
'truck' => 'truck',
'pinterest' => 'pinterest',
'pinterest-square' => 'pinterest-square',
'google-plus-square' => 'google-plus-square',
'google-plus' => 'google-plus',
'money' => 'money',
'caret-down' => 'caret-down',
'caret-up' => 'caret-up',
'caret-left' => 'caret-left',
'caret-right' => 'caret-right',
'columns' => 'columns',
'unsorted' => 'sort',
'sort' => 'sort',
'sort-down' => 'sort-desc',
'sort-desc' => 'sort-desc',
'sort-up' => 'sort-asc',
'sort-asc' => 'sort-asc',
'envelope' => 'envelope',
'linkedin' => 'linkedin',
'rotate-left' => 'undo',
'undo' => 'undo',
'legal' => 'gavel',
'gavel' => 'gavel',
'dashboard' => 'tachometer',
'tachometer' => 'tachometer',
'comment-o' => 'comment-o',
'comments-o' => 'comments-o',
'flash' => 'bolt',
'bolt' => 'bolt',
'sitemap' => 'sitemap',
'umbrella' => 'umbrella',
'paste' => 'clipboard',
'clipboard' => 'clipboard',
'lightbulb-o' => 'lightbulb-o',
'exchange' => 'exchange',
'cloud-download' => 'cloud-download',
'cloud-upload' => 'cloud-upload',
'user-md' => 'user-md',
'stethoscope' => 'stethoscope',
'suitcase' => 'suitcase',
'bell-o' => 'bell-o',
'coffee' => 'coffee',
'cutlery' => 'cutlery',
'file-text-o' => 'file-text-o',
'building-o' => 'building-o',
'hospital-o' => 'hospital-o',
'ambulance' => 'ambulance',
'medkit' => 'medkit',
'fighter-jet' => 'fighter-jet',
'beer' => 'beer',
'h-square' => 'h-square',
'plus-square' => 'plus-square',
'angle-double-left' => 'angle-double-left',
'angle-double-right' => 'angle-double-right',
'angle-double-up' => 'angle-double-up',
'angle-double-down' => 'angle-double-down',
'angle-left' => 'angle-left',
'angle-right' => 'angle-right',
'angle-up' => 'angle-up',
'angle-down' => 'angle-down',
'desktop' => 'desktop',
'laptop' => 'laptop',
'tablet' => 'tablet',
'mobile-phone' => 'mobile',
'mobile' => 'mobile',
'circle-o' => 'circle-o',
'quote-left' => 'quote-left',
'quote-right' => 'quote-right',
'spinner' => 'spinner',
'circle' => 'circle',
'mail-reply' => 'reply',
'reply' => 'reply',
'github-alt' => 'github-alt',
'folder-o' => 'folder-o',
'folder-open-o' => 'folder-open-o',
'smile-o' => 'smile-o',
'frown-o' => 'frown-o',
'meh-o' => 'meh-o',
'gamepad' => 'gamepad',
'keyboard-o' => 'keyboard-o',
'flag-o' => 'flag-o',
'flag-checkered' => 'flag-checkered',
'terminal' => 'terminal',
'code' => 'code',
'mail-reply-all' => 'reply-all',
'reply-all' => 'reply-all',
'star-half-empty' => 'star-half-o',
'star-half-full' => 'star-half-o',
'star-half-o' => 'star-half-o',
'location-arrow' => 'location-arrow',
'crop' => 'crop',
'code-fork' => 'code-fork',
'unlink' => 'chain-broken',
'chain-broken' => 'chain-broken',
'question' => 'question',
'info' => 'info',
'exclamation' => 'exclamation',
'superscript' => 'superscript',
'subscript' => 'subscript',
'eraser' => 'eraser',
'puzzle-piece' => 'puzzle-piece',
'microphone' => 'microphone',
'microphone-slash' => 'microphone-slash',
'shield' => 'shield',
'calendar-o' => 'calendar-o',
'fire-extinguisher' => 'fire-extinguisher',
'rocket' => 'rocket',
'maxcdn' => 'maxcdn',
'chevron-circle-left' => 'chevron-circle-left',
'chevron-circle-right' => 'chevron-circle-right',
'chevron-circle-up' => 'chevron-circle-up',
'chevron-circle-down' => 'chevron-circle-down',
'html5' => 'html5',
'css3' => 'css3',
'anchor' => 'anchor',
'unlock-alt' => 'unlock-alt',
'bullseye' => 'bullseye',
'ellipsis-h' => 'ellipsis-h',
'ellipsis-v' => 'ellipsis-v',
'rss-square' => 'rss-square',
'play-circle' => 'play-circle',
'ticket' => 'ticket',
'minus-square' => 'minus-square',
'minus-square-o' => 'minus-square-o',
'level-up' => 'level-up',
'level-down' => 'level-down',
'check-square' => 'check-square',
'pencil-square' => 'pencil-square',
'external-link-square' => 'external-link-square',
'share-square' => 'share-square',
'compass' => 'compass',
'toggle-down' => 'caret-square-o-down',
'caret-square-o-down' => 'caret-square-o-down',
'toggle-up' => 'caret-square-o-up',
'caret-square-o-up' => 'caret-square-o-up',
'toggle-right' => 'caret-square-o-right',
'caret-square-o-right' => 'caret-square-o-right',
'euro' => 'eur',
'eur' => 'eur',
'gbp' => 'gbp',
'dollar' => 'usd',
'usd' => 'usd',
'rupee' => 'inr',
'inr' => 'inr',
'cny' => 'jpy',
'rmb' => 'jpy',
'yen' => 'jpy',
'jpy' => 'jpy',
'ruble' => 'rub',
'rouble' => 'rub',
'rub' => 'rub',
'won' => 'krw',
'krw' => 'krw',
'bitcoin' => 'btc',
'btc' => 'btc',
'file' => 'file',
'file-text' => 'file-text',
'sort-alpha-asc' => 'sort-alpha-asc',
'sort-alpha-desc' => 'sort-alpha-desc',
'sort-amount-asc' => 'sort-amount-asc',
'sort-amount-desc' => 'sort-amount-desc',
'sort-numeric-asc' => 'sort-numeric-asc',
'sort-numeric-desc' => 'sort-numeric-desc',
'thumbs-up' => 'thumbs-up',
'thumbs-down' => 'thumbs-down',
'youtube-square' => 'youtube-square',
'youtube' => 'youtube',
'xing' => 'xing',
'xing-square' => 'xing-square',
'youtube-play' => 'youtube-play',
'dropbox' => 'dropbox',
'stack-overflow' => 'stack-overflow',
'instagram' => 'instagram',
'flickr' => 'flickr',
'adn' => 'adn',
'bitbucket' => 'bitbucket',
'bitbucket-square' => 'bitbucket-square',
'tumblr' => 'tumblr',
'tumblr-square' => 'tumblr-square',
'long-arrow-down' => 'long-arrow-down',
'long-arrow-up' => 'long-arrow-up',
'long-arrow-left' => 'long-arrow-left',
'long-arrow-right' => 'long-arrow-right',
'apple' => 'apple',
'windows' => 'windows',
'android' => 'android',
'linux' => 'linux',
'dribbble' => 'dribbble',
'skype' => 'skype',
'foursquare' => 'foursquare',
'trello' => 'trello',
'female' => 'female',
'male' => 'male',
'gittip' => 'gittip',
'sun-o' => 'sun-o',
'moon-o' => 'moon-o',
'archive' => 'archive',
'bug' => 'bug',
'vk' => 'vk',
'weibo' => 'weibo',
'renren' => 'renren',
'pagelines' => 'pagelines',
'stack-exchange' => 'stack-exchange',
'arrow-circle-o-right' => 'arrow-circle-o-right',
'arrow-circle-o-left' => 'arrow-circle-o-left',
'toggle-left' => 'caret-square-o-left',
'caret-square-o-left' => 'caret-square-o-left',
'dot-circle-o' => 'dot-circle-o',
'wheelchair' => 'wheelchair',
'vimeo-square' => 'vimeo-square',
'turkish-lira' => 'try',
'try' => 'try',
'plus-square-o' => 'plus-square-o',
'space-shuttle' => 'space-shuttle',
'slack' => 'slack',
'envelope-square' => 'envelope-square',
'wordpress' => 'wordpress',
'openid' => 'openid',
'institution' => 'university',
'bank' => 'university',
'university' => 'university',
'mortar-board' => 'graduation-cap',
'graduation-cap' => 'graduation-cap',
'yahoo' => 'yahoo',
'google' => 'google',
'reddit' => 'reddit',
'reddit-square' => 'reddit-square',
'stumbleupon-circle' => 'stumbleupon-circle',
'stumbleupon' => 'stumbleupon',
'delicious' => 'delicious',
'digg' => 'digg',
'pied-piper' => 'pied-piper',
'pied-piper-alt' => 'pied-piper-alt',
'drupal' => 'drupal',
'joomla' => 'joomla',
'language' => 'language',
'fax' => 'fax',
'building' => 'building',
'child' => 'child',
'paw' => 'paw',
'spoon' => 'spoon',
'cube' => 'cube',
'cubes' => 'cubes',
'behance' => 'behance',
'behance-square' => 'behance-square',
'steam' => 'steam',
'steam-square' => 'steam-square',
'recycle' => 'recycle',
'automobile' => 'car',
'car' => 'car',
'cab' => 'taxi',
'taxi' => 'taxi',
'tree' => 'tree',
'spotify' => 'spotify',
'deviantart' => 'deviantart',
'soundcloud' => 'soundcloud',
'database' => 'database',
'file-pdf-o' => 'file-pdf-o',
'file-word-o' => 'file-word-o',
'file-excel-o' => 'file-excel-o',
'file-powerpoint-o' => 'file-powerpoint-o',
'file-photo-o' => 'file-image-o',
'file-picture-o' => 'file-image-o',
'file-image-o' => 'file-image-o',
'file-zip-o' => 'file-archive-o',
'file-archive-o' => 'file-archive-o',
'file-sound-o' => 'file-audio-o',
'file-audio-o' => 'file-audio-o',
'file-movie-o' => 'file-video-o',
'file-video-o' => 'file-video-o',
'file-code-o' => 'file-code-o',
'vine' => 'vine',
'codepen' => 'codepen',
'jsfiddle' => 'jsfiddle',
'life-bouy' => 'life-ring',
'life-buoy' => 'life-ring',
'life-saver' => 'life-ring',
'support' => 'life-ring',
'life-ring' => 'life-ring',
'circle-o-notch' => 'circle-o-notch',
'ra' => 'rebel',
'rebel' => 'rebel',
'ge' => 'empire',
'empire' => 'empire',
'git-square' => 'git-square',
'git' => 'git',
'hacker-news' => 'hacker-news',
'tencent-weibo' => 'tencent-weibo',
'qq' => 'qq',
'wechat' => 'weixin',
'weixin' => 'weixin',
'send' => 'paper-plane',
'paper-plane' => 'paper-plane',
'send-o' => 'paper-plane-o',
'paper-plane-o' => 'paper-plane-o',
'history' => 'history',
'circle-thin' => 'circle-thin',
'header' => 'header',
'paragraph' => 'paragraph',
'sliders' => 'sliders',
'share-alt' => 'share-alt',
'share-alt-square' => 'share-alt-square',
'bomb' => 'bomb',
'soccer-ball-o' => 'futbol-o',
'futbol-o' => 'futbol-o',
'tty' => 'tty',
'binoculars' => 'binoculars',
'plug' => 'plug',
'slideshare' => 'slideshare',
'twitch' => 'twitch',
'yelp' => 'yelp',
'newspaper-o' => 'newspaper-o',
'wifi' => 'wifi',
'calculator' => 'calculator',
'paypal' => 'paypal',
'google-wallet' => 'google-wallet',
'cc-visa' => 'cc-visa',
'cc-mastercard' => 'cc-mastercard',
'cc-discover' => 'cc-discover',
'cc-amex' => 'cc-amex',
'cc-paypal' => 'cc-paypal',
'cc-stripe' => 'cc-stripe',
'bell-slash' => 'bell-slash',
'bell-slash-o' => 'bell-slash-o',
'trash' => 'trash',
'copyright' => 'copyright',
'at' => 'at',
'eyedropper' => 'eyedropper',
'paint-brush' => 'paint-brush',
'birthday-cake' => 'birthday-cake',
'area-chart' => 'area-chart',
'pie-chart' => 'pie-chart',
'line-chart' => 'line-chart',
'lastfm' => 'lastfm',
'lastfm-square' => 'lastfm-square',
'toggle-off' => 'toggle-off',
'toggle-on' => 'toggle-on',
'bicycle' => 'bicycle',
'bus' => 'bus',
'ioxhost' => 'ioxhost',
'angellist' => 'angellist',
'cc' => 'cc',
'shekel' =>  'ils',
'sheqel' => 'ils',
'ils' => 'ils',
'meanpath' => 'meanpath',
    ),
  );
  return $bundles;
}
